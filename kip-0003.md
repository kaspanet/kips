```
  KIP: 3 
  Layer: Consensus (Hard fork), API/RPC
  Title: Specification of UTXO fungible native assets scheme.
  Author: KaffinPX <kaffinpx@protonmail.com>
  Status: proposed
```

# Abstract

This document specifies a scheme for implementing fungible native assets on Kaspa.

# Motivation

Native assets would increase activity on network which means fees for miners and this would help to secure network after emission ends.
Also would make Kaspa an actual payment settlement layer by allowing to transact other things.

# Goals

* Adding assetId to UTXOs for determining asset.
* Allowing input-less outputs for mintage.
* Implementing asset ownership and operations by ownership UTXOs.
* Allowing bundled wallet to transact or manage assets and implementing asset-specific calls to Kaspad RPC.

# Specification

An asset id will be added to every UTXO, Kaspa wont have an asset id and can be shown as ``0000000000000000000000000000000000000000`` on explorers.

Mintage of assets will be consist on two parts:  
Firstly, ownership UTXO MUST be minted by an inputless output:
* Amount of it MUST be zero.
* Assets info will be on it and validity will be checked by:
  - Name(name), ``name.len() <= 32``
  - Ticker(ticker), ``ticker.len() <= 8``
  - Decimal count(decimals), ``(maxSupply * decimals) <= i64::MAX``
  - Maximum supply(maxSupply), ``(maxSupply * decimals) <= i64::MAX``
  - Circulating supply(supply), ``supply == 0``
* Asset id will be calculated by `(blake2b(blake2b(name) + ticker + decimals + maxSupply + transaction hash).toStr('hex')).get(0..40)` and will be included on UTXO as ``assetId``.
* Relaying fee of this output MUST be paid by Kaspa and should be at least ``100 KAS``.

Secondly, asset UTXOs should be minted using ownership UTXO in inputs.
* New UTXOs just will include assets id, not details of asset.
* Minted amount in outputs shouldnt excess ``supply * decimals`` and ``maxSupply * decimals``.
* Ownership UTXOs supply parameter must be updated with new supply and must be outputted again.

For minting again, step 2 can be repeated.  
For moving ownership, ownership UTXO can be moved to another output.  
For spending, minted outputs can be spent as a normal output but must keep ``assetId``. 

# Backwards compatibility
* Breaks consensus rules, requires hardfork
