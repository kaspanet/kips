```
  KIP: 3 
  Layer: Consensus (Hard fork), API/RPC
  Title: Specification of UTXO fungible native assets scheme.
  Author: KaffinPX <kaffinpx@protonmail.com>
  Status: proposed
```

# Abstract

This document specifies a scheme for implementing fungible native assets on Kaspa.

# Motivation

Native assets would increase activity on network which means fees for miners and this would help to secure network after emission ends.
Also would make Kaspa an actual payment settlement layer by allowing to transact other things.

# Goals

* Adding assetId to UTXOs for determining asset.
* Allowing input-less outputs for mintage.
* Implementing asset ownership and operations by ownership UTXOs.
* Allowing bundled wallet to transact or manage assets and implementing asset-specific calls to Kaspad RPC.
* Allow coinbase transactions to accept fees as other assets on consensus level.

# Specification

An asset id will be added to every UTXO, Kaspa wont have an asset id and can be shown as ``0000000000000000000000000000000000000000`` on explorers.

Mintage of assets will be consist on two parts:  
Firstly, ownership UTXO must be minted by an inputless output:
* Amount of it must be zero.
* Assets info will be on it and validity will be checked by:
  - Name(name), ``0 < name.len() <= 64``
  - Ticker(ticker), ``0 < ticker.len() <= 16``
  - Decimal count(decimals), ``0 <= decimals <= uint8::MAX``
  - Maximum supply(maxSupply), ``0 < maxSupply <= uint64::MAX``
  - Circulating supply(supply), ``supply == 0``
* Asset id will be calculated by `(blake2b(name + ticker + decimals + maxSupply + transaction hash).toStr('hex')).get(0..40)` and will be included on UTXO as ``assetId``.
* Mass of ownership UTXOs output must be multiplied by 100000 as an anti-spam by fees.

Secondly, asset UTXOs should be minted using ownership UTXO in inputs.
* New UTXOs just will include assets id, not details of asset.
* Minted amount in outputs shouldnt excess ``(maxSupply - supply) * decimals``.
* Ownership UTXOs supply parameter must be updated with new supply and must be outputted again.
  
For minting again(re-mintage), step 2 can be repeated.  
For moving ownership, ownership UTXO can be moved to an another output.  
For spending, minted outputs can be spent as a normal output but must keep ``assetId``.  

Consensus must allow other assets as fee on coinbase transactions but it wont be implemented in default for miners on reference node.

# Backwards compatibility
* Breaks consensus rules, requires hardfork
